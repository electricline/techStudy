## 데이터베이스

1. DBMS와 RDBMS의 차이점
- database management system의 약자로 데이터베이스를 관리하는 시스템입니다.
- Relational DataBase Management System의 약자로 관계형 모델을 기반으로 하는 DBMS유형입니다.
- CRUD가 가능하며, 스키마에 따라 DB 테이브렝 저장되며, 관계를 통한 테이블간 연결을 통해 사용됩니다.

장점 : 정해진 스키마에 따라 데이터를 저장하여야 하기 떄문에 명확한 데이터 구조를 보장합니다.
      그리고 각 데이터에 맞게 테이블을 나누어 데이터 중복을 피해 데이터 공간을 절약 할 수 있습니다.

단점 : 오라클 같은 시스템을 사용하게 될 경우 비용적으로 부담이 될 수 있습니다. 
      그리고 RDBMS 관계로 인한 시스템 복잡도를 구려하여 구조화를 해야합니다.
	  시스템이 복잡해 질수록 쿼리문이 복잡해지고 성능이 저하됩니다.
	  수평적확장이 어려워 수직적 확장을 대부분 하기 때문에 한계에 직면할 수 있습니다.

2. NOSQL란?
- RDBMS와 반대되는 방식을 사용하여 스키마와 관계라는 개념이 없습니다.
- 따라서 데이터를 좀 더 자유롭게 관리할 수 있으며 테이블과 같은 개념으로 컬렉션이라는 형태로 데이터를 관리합니다. 
- 리스트, 해시 테이블, 트리, 그래프 등 다양한 자료구조를 사용합니다. 

3. NOSQL을 사용하는 이유는 무엇인가요?
- 정해진 스키마에 따라 저장해야하는 RDBMS 보다 자유롭게 데이터를 추가가 가능합니다. 
- 다수가 오픈 소스로 제공합니다
- DB의 중단없는 서비스와 자동 복구 기능지원.
- 대부분 여러 대의 데이터베이스 서버를 묶어서(클러스터링) 하나의 DB를 구성
- 필요한 데이터가 보통 하나의 컬럭션에 있으며, 이는 자주 변경되지 않는 데이터에 장점이 있습니다.
- 수평적 확장이 쉽습니다.

- 단점 : 데이터 업데이트시 중복되어 저장되어있는 데이터를 똑같이 관리(업데이트)해 주어야 합니다.

4. RDBMS와 NOSQL 비교
- 확장에서의 차이
- 두 데이터베이스에서는 Scaling 개념도 중요합니다.
- 데이터베이스에서 확장은 수직적 확장과 수평적 확장이 있습니다.
- 수직적 확장은 단순히 데이터베이스의 하드웨어 성능을 높여 처리력을 높이는 것입니다.
- 수평적 확장은 더 많은 데이터베이스를 추가하여 요청이 분산되도록 처리하는 것입니다.
- NoSQL에서 수평적 확장에 RDB보다 훨씬 유리합니다.

5. NOSQL의 종류는 무엇이 있나요?
- Key Value DB
- Wide Columnar Store
- Document DB
- Graph DB

6. MongoDB란?
-  NoSQL로 분류되는 크로스 플랫폼 도큐먼트 지향 데이터베이스 시스템이다. 
-  MySQL 처럼 전통적인 테이블-관계 기반의 RDBMS가 아니며 SQL을 사용하지 않는다.

7. DDL/DML/DCL/TCL이란?
- DDL  : CREATE, ALTER, DROP, TRUNCATE
- DML  : SELECT, UPDATE, INSERT, DELETE
- DCL  : GRANT, REVOTE
- TCL  : COMMIT, ROLLBACK, SAVEPOINT 

8.인덱스를 사용하는 이유
- 인덱스를 사용하게 되면 쿼리의 실행계획에 영향을 미치게 됩니다. 
- 인덱스를 만들어 놓게 되면 또 다른 인덱스 테이블이 생성되어 그 안에 테이블의 주소 정보를 인덱스의 키 값과 함께 저장합니다. 
- 그래서 만약 인덱스가 지정된 컬럼을 통해 검색하게 될 경우 인덱스 테이블에 접근하여 빠르게 테이블에 접근할 수 있습니다. 
- 반면에 인덱스가 지정되어 있지 않다면 table full scan을 하게 될 것입니다.

9. 인덱스의 단점
- 하지만 단점이라면 인덱스는 항상 정렬된 상태를 유지하여 데이터의 
- 변경작업이 자주 일어난다면 인덱스를 재작성해야 하므로 오버헤드가 발생합니다. 
- 그러므로 인덱스된 컬럼을 추가 또는 삭제 할 때 성능이 떨어집니다. 또한, 인덱스를 저장하는 장소가 필요하여 추가적인 공간이 필요합니다.

10. 클러스터드 인덱스 vs 논 클러스터드 인덱스
- 클러스터드 인덱스는 물리적으로 행을 재배열 / 논 클러스터드 인덱스는 물리적으로 재배열 하지 않는다.
- 인덱스 페이지 용량이 넌 클러스터드 인덱스 페이지 용량보다 작다. / 클러스터드 인덱스 페이지 용량보다 크다.
- 30% 이내에서 사용해야 좋은 선택도 / 3% 이내에서 사용해야 좋은 선택도
- 테이블당 1개 / 테이블당 249개   
참조사이트 : https://lng1982.tistory.com/144

11. 데이터베이스 인덱스의 자료구조
- B-Tree Index
  - 가장 일반적으로 사용되는 인덱스 알고리즘입니다.
  - 가장 오래된 알고리즘이고 성숙한 안정된 상태의 저장 방식입니다.
  - 컬럼값을 변형하지 않고, 원래 값을 기준으로 이용해서 인덱싱하는 알고리즘입니다
- Hash Index
  - 컬럼값을 해시값으로 계산하여 인덱싱하는 알고리즘입니다.
  - 매우 빠른 속도를 지원합니다.
  - 컬럼값이 해시값으로 변형되어 인덱싱에 활용되기 때문에 컬럼값의 일부분을 검색하는 경우, 불가능합니다.
  - 주로 메모리 기반의 데이터베이스에서 많이 사용됩니다. 이유는 메모리 주소형태로 그 값을 모두 참조하는 형태로 사용하기 때문입니다.
- Fractal-tree Index
  - B-Tree Index의 단점을 보완하기 위해 고안된 알고리즘입니다.
  - B-Tree 처럼 컬럼 값을 변형하지 않고 인덱싱합니다.
  - 데이터가 저장되거나 삭제될때, 처리하는 비용을 줄일 수 있게 설계되어서 B-Tree보다 경제적입니다.
  - 다만 아직은 성숙되지 않은 인덱싱 알고리즘입니다.

12. 정규화를 하는 이유는 무엇인가?
- 불필요한 데이터를 제거합니다.
- 데이터 저장을 "논리적으로" 합니다.
- 종속관계를 분석하여 테이블을 분리합니다.
- 이상현상이 발생하지 않도록 방지합니다. 

13. 정규화 1, 2, 3에 대하여 각각 설명하세요.
- 1차 정규형 : 각 로우마다 컬럼의 값이 1개씩만 있어야 합니다. 이를 원자값을 갖는다고 합니다.
- 2차 정규형 : 제1정규형을 만족하면서 릴레이션에 존재하는 부분 함수적 종속을 제거하여, 모든 속성이 기본키에 완전 함수 종속이 되도록 만들어진 정규형입니다.
- 3차 정규형 : 기본키를 제외한 속성들 간의 이행적 함수 종속이 없는 것입니다. 풀어서 말하자면 기본키 이외에 다른컬럼이 그외 다른컬럼을 결정할 수 없습니다.
- BCNF    : 3차정규형을 만족하면서 모든 결정자가 후보키 집합에 속한 정규형입니다.

14. 역정규화를 하는 이유는 무엇인가요
- 정규화를 통해 분리되었던 릴레이션에서 중복을 허용하고 다시 통합하거나 분할하여 구조를 재조정하는 과정입니다.
- 물리적 설계과정에서 성능을 향상시키기 위해 사용합니다.

15. 함수적 종속에 대해서 설명하시오
- 완전 함수적 종속 : 기본키를 구성하는 모든 속성이 포함된 기본키의 부분집합에 종속된 경우입니다.
- 부분함수적 종속  : 기본키가 아닌 다른 속성에 종속되거나,기본키가 여러 속성으로 구성되어 있을경우 기본키를 구성하는 속성 중 일부만 종속되는 경우입니다.
- 이행적 함수 종속 : x,y,z라는 3개의 속성이 있을때 x-> y, y->z , x->z가 성립될때, 즉 x를알면 y를 알고 z를 알수있는 경우를 말합니다.

16. DB 무결성이란?
- 데이터베이스에 저장된 데이터 값과 그것이 표현하는 현실 세계의 실제값이 일치하는 정확성을 의미한다.

17. 무결성 유지하는 이유가 있을까요? 
- 규칙을 집중시키고, 데이터 딕셔너리에 완전히 문서화 됩니다.

18. 무결성의 종류에 대해 설명해주세요
 - 널 무결성 : 릴레이션의 특정속성 값이 Null이 될 수 없도록 하는 규정
 - 고유 무결성 : 릴레이션의 특정 속성에 대해서 각 튜플이 갖는 값들이 서로 달라야 한다는 규정
 - 참조 무결성 : 외래키 값은 Null이거나 참조 릴레이션의 기본키 값과 동일해야 한다는 규정 즉 릴레이션은 참조할 수 없는 외래키 값을 가질 수 없다는 규정
 - 도메인 무결성 : 특정 속성의 값이, 그 속성이 정의된 도메인에 속한 값이어야 한다는 규정
 - 키 무결성 : 하나의 테이블에는 적어도 하나의 키가 존재해야 한다는 규정

19. 트랜잭션이란?
- 데이터베이스의 상태를 변화시키는 하나의 논리적인 작업 단위라고 할 수 있으며, 트랜잭션에는 여러개의 연산이 수행될 수 있습니다.
- 수행중에 한 작업이라도 실패하면 전부 실패하고, 모두 성공해야 성공이라고 할 수 있습니다. 

20  ACID란?
- Atomicity(원자성): 트랜잭션의 연산은 모든 연산이 완벽히 수행되어야 하며, 한 연산이라도 실패하면 트랜잭션은 실패해야 합니다.
- Consistency(일관성): 트랜잭션은 유효한 상태로만 변경될 수 있습니다.
- Isolation(고립성): 트랜잭션은 동시에 실행될 경우 다른 트랜잭션에 의해 영향을 받지 않고 독립적으로 실행되어야 합니다.
- Durability(내구성): 트랜잭션이 커밋된 이후에는 시스템 오류가 발생하더라도 커밋된 상태로 유지되는 것을 보장해야 합니다. (일반적으로 비휘발성 메모리에 데이터가 저장되는 것을 의미)

21. 트랜잭션을 병행으로 처리하려고 할 때 발생할 수 있는 문제를 설명하시오
- 갱신 손실, 비완료 의존성, 모순성, 연쇄 복귀 등의 문제가 발생할 수 있습니다.

22. 트랜잭션을 병행으로 처리할 때 문제를 방지하기 위한 방법을 설명하시오
- 트랜잭션의 실행 순서를 일관적으로 지정하여 데이터에 접근하는 트랜잭션의 실행 순서를 유지시켜 데드락을 방지해야 합니다. 

23. 로킹 제어가 일으킬 수 있는 문제점은 무엇인가요?
- 로킹 제어란 하나의 트랜잭션이 데이터에 접근하는 동안 다른 트랜잭션이 그 데이터의 항목을 접근할 수 없도록 잠그는 것을 의미합니다.
- 로킹으로 인해 특정 세션이 작업을 진행하지 못하는 상태가 될 수 있어 블로킹 문제가 발생할 수 있습니다. 
- 또는 두 세션이 각각 락을 설정하여 리소스를 기다리는 상황으로 인해 데드락이 발생할 수 있습니다.

24. 트랜잭션 격리레벨에 대해 말해주세요
- Read Uncommitted : 한 트랜잭션에서 커밋하지 않은 데이타에 다른 트랜잭션이 접근 가능하다. 즉, 커밋하지 않은 데이타를 읽을 수 있다.
- Read Committed : 커밋이 완료된 데이타만 읽을 수 있다.
- Repeatable Read : 트랜잭션 내에서 한번 조회한 데이타를 반복해서 조회해도 같은 데이타가 조회 된다
- Serializable : 가장 엄격한 격리 수준, 위 3가지 문제점을 모두 커버 가능하다. 하지만 동시 처리 성능은 급격히 떨어질 수 있다.

25. DB의 Commit / Rollback이란? 
- 트랜젝션의 처리 과정을 데이터베이스에 반영하기 위해서, 변경된 내용을 모두 영구 저장한다.
- COMMIT 수행하면, 하나의 트랜젝션 과정을 종료하게 된다.
- Rollaback은 트랜젝션으로 인한 하나의 묶음 처리가 시작되기 이전의 상태로 되돌린다.

26. 참조 무결성이란?
- 외래키 값은 Null이거나 참조 릴레이션의 기본키 값과 동일해야 한다. 즉 릴레이션은 참조할 수 없는 외래키 값을 가질 수 없다.
- 외래키와 참조하려는 테이블의 기본키는 도메인과 속성 개수가 같아야 한다.

27. 기본키(Primary Key)와 유일키(Unique Key)의 차이점?
- pk는 해당 테이블의 식별자 역할을 하는 제약조건으로 테이블에 하나만 설정할 수 있음
- uk는 Not null 속성이 들어가며, 해당 칼럼에 입력되는 데이터가 각각 유일하다는 것을 보장하기 위한 제약조건으로 한 테이블에 여러개 설정이 가능합니다.

28. JOIN의 원리는?
https://eehoeskrap.tistory.com/84

29. JOIN의 종류는 무엇이 있나요?
- inner join ,left outer join, right outer join, full join, cross join

30. VIEW란?
- 뷰는 사용자에게 접근이 허용된 자료만을 제한적으로 보여주기 위해 하나 이상의 기본 테이블로부터 유도된, 이름을 가지는 가상 테이블이다.
- 장점 : 논리적 데이터 독립성을 제공하고, 사용자의 데이터관리를 간단하게 해준다.
- 단점 : 독립적인 인덱스를 가질 수 없고, ALTER VIEW문을 사용할 수 없으며, 각종 제약이 따릅니다.

31. 인라인뷰, 서브쿼리, 스칼라서브쿼리가 무엇인가?
- 인라인뷰 : SELECT절의 결과를 FROM절에서 하나의 테이블처럼 사용하고 싶을 때 사용합니다. 서브쿼리에서 확인 가능.
- 서브쿼리 : SELECT 절의 결과를 WHERE 절에서 하나의 변수(상수)처럼 사용하고 싶을 때 사용합니다.
- 스칼라서브쿼리 : select 절에 서브쿼리를 사용하여 하나의 컬럼처럼 사용하기 위한 목적이며 JOIN대체 표현식으로 자주 사용됩니다. 성능이 안좋아서 비추합니다.

32. 테이블을 드롭(DROP)하는 것과 자르는 것(Truncate), 그리고 테이블 내 모든 레코드를 삭제(Delete)하는 것의 차이점은 무엇입니까?
- DELETE TABLE은 로그되는 작업이기 때문에 삭제되는 각 행은 트랜잭션 로그에 기록되고 이것은 작업을 느리게 합니다. 
- TRUCATE TABLE 역시 테이블 내 행들을 삭제하지만 삭제되는 각 행을 기록하지 않고 대신 테이블의 데이터베이스 할당 해제를 기록하여 작업이 빠릅니다. TRUNCATE TABLE는 롤백할 수 없습니다.
- DELETE 명령어는 데이터는 지워지지만 테이블 용량은 줄어들지 않는다. 원하는 데이터만 지울 수 있다. 삭제 후 RollBack 가능하다.
- TRUNCATE 명령어는 용량이 줄어들고, 인덱스 등도 모두 삭제된다. 테이블은 삭제하지는 않고 데이터만 삭제한다. 한꺼번에 다 지워야 한다. 삭제후 절대 되돌릴 수 없다.
- DROP 명령어는 테이블 전체를 삭제,공간, 객체를 삭제한다. 삭제 후 절대 되돌릴 수 없다.

33. 힌트란
- SQL 튜닝의 핵심부분으로 일종의 지시구문이다. SQL에 포함되어 쓰여져 Optimizer의 실행 계획을 원하는 대로 바꿀 수 있게 해줍니다.

34. 트리거란?
- 특정 테이블에 INSERT, DELETE, UPDATE 같은 DML 문이 수행되었을 때, 
- 데이터베이스에서 자동으로 동작하도록 작성된 프로그램입니다. 
- 즉! 사용자가 직접 호출하는 것이 아니라, 데이터베이스에서 자동적으로 호출하는 것이 가장 큰 특징입니다. 

35. 클러스터링 vs 리플리케이션에 대해 설명해주세요.
- 리플리케이션이란 여러 개의 DB를 권한에 따라 수직적인 구조(Master-Slave)로 구축하는 방식이며 비동기 방식으로 노드들 간의 데이터를 동기화
- 클러스터링이란 여러 개의 DB를 수평적인 구조로 구축하는 방식이다. Fail Over 시스템을 구축하기 위해서 사용된다. 클러스터링은 동기 방식으로 노드들 간의 데이터를 동기화

참조사이트 : https://mangkyu.tistory.com/97

36. 데이타베이스 버퍼 캐시란?
- 사용자가 입력한 데이터를 데이터 파일에 저장하고 이를 다시 읽는 과정에서 거쳐가는 캐시영역
- 물리적인 I/O를 최소화하기 위해 최근에 사용한 블록에 대한 정보를 저장하는 메모리의 일정 영역

37. Redis란?
- Redis는 key-value store NOSQL DB입니다. 싱글스레드로 동작하며 자료구조를 지원합니다. 
  그리고 다양한 용도로 사용될 수 있도록 다양한 기능을 지원합니다. 
  데이터의 스냅샷 혹은 AOF 로그를 통해 복구가 가능해서 어느정도 영속성도 보장됩니다.
- 스프링에서는 세션을 관리하거나, 캐싱을 하는데에 자주 사용되는 것으로 알고 있습니다.

38. Redis와 Memcached의 차이는?
- Redis는 싱글 스레드 기반으로 동작하고, Memcached는 멀티스레드를 지원해서 멀티 프로세싱이 가능합니다.
- Redis는 다양한 자료구조를 지원하고, Memcached는 문자열 형태로만 저장합니다.
- Redis는 여러 용도로 사용할 수 있도록 다양한 기능을 지원합니다.
- Redis는 스냅샷, AOF 로그를 통해서 데이터 복구가 가능합니다.

39. Elastic Search란?
- Elastic Search는 자바로 개발된 오픈소스 검색엔진 입니다. 보통 단독으로 사용하기보다는 ELK 스택이라고 부르는 Logstash, Kibana, Beats를 추가적으로 사용합니다.
- Inverted Index 구조로 데이터를 저장해서, 전문(Full-text) 검색시에 RDBMS에 비해 뛰어난 성능을 보장합니다.
- 다양한 용도로 사용할 수 있습니다. (데이터 저장, 문서 검색, 위치 검색, 머신 러닝 기반 검색, 로그 분석, 보안 감사 분석 등)

40. CAP 이론과, Eventual Consistency에 대해서 설명해주세요
- CAP는 분산 환경에서 모두를 만족하는 시스템은 없다는 이론입니다.
- Eventual Consistency는 이 Consistency를 보장해주지 못하기 때문에 나온 개념으로, 
  Consistency를 완전히 보장하지는 않지만, 결과적으로 언젠가는 Conssistency가 보장됨을 의미합니다.

41. 오라클중에 계층형 쿼리란?
- 동일 테이블에 계층적으로 상위와 하위 데이터가 포함된 데이터를 말한다.
- WITH문을 통해 해결하며 오라클 10G버전부터 CONNET BY문으로 구현 가능합니다.
참조사이트 : https://goddaehee.tistory.com/60?category=275012

42. CONNECT BY의 실행순서
START WITH -> CONNECT BY절 ->WHERE 절

43. 오라클에서 행을 열로 변환 하는 쿼리가 있나요(PIVOT)?
- 열에서 행으로 PIVOT 함수를 사용하고, 열에서 행으로 변환하는거는 UNPIVOT 함수, DECODE와 집계함수를 사용하기도 합니다.

44. 오라클에서 그룹별 소계 합계 구하는 함수에 대해 설명해주세요.
- ROLL UP 함수를 사용합니다.

45. CUBE 함수란?
-  계산 가능한 모든 소계와 합계를 반환할떄 사용합니다.

46. GROUPING SET은?
- 여러 그룹핑 쿼리를 UNION ALL 한 것과 같은 결과를 만들 수 있어 조금 더 유연하게 소계, 합계를 집계할 수 있다.

47. 그룹별 순번, 순위기 매기기 함수란?
- RANK함수를 사용합니다.

48. 검색조건중에 like절과 SUBSTR 중에 어떤게 더 빠를까요? 그 이유는? (메가존 면접문제)
- 둘다 풀스캔이 구조면 큰 차이가 없지만, 인덱스가 있다는 가정하에 LIKE절은 인덱스를 사용할수 있고, SUBSTR는 INDEX를 사용할수 없습니다.
  따라서 LIKE절이 빠르다고 본다고 생각합니다.  (%가나다 (인덱스 안붙고) 속도 느림, 가나다%(인덱스 붙음))

49. 쿼리 순서에 대해 나열해주세요.
- SELECT -> FROM -> WHERE -> GROUP BY -> HAVING -> ORDER BY 

50. COUNT와 EXIST 속도 차이 장단점
- 예를들어 같은 한건을 찾을때 EXIST는 조건에 해당하는 ROW 1개만 찾으면 바로 쿼리를 종료하기 때문에 빠릅니다.
- COUNT는 찾더라도 총 개수를 카운팅하기 위해 모든 row를 탐색하기 때문입니다.  
- 하지만 스캔 대상이 앞에 있을 수록 더 심한 성능차이가 발생합니다.
- queryDsl에서 exits함수 제공안됨.
