## 데이터베이스

- 데이터베이스란?

- DBMS란?
- - 컴퓨터에 수록 된 자료들을 쉽고 빠르게 추가, 수정, 삭제 할 수 있도록 해주는 시스템
- - 데이터베이스 내의 정보를 검색하거나 정보를 저장하기 편리하고 효율적인 환경을 제공하는 것이 목적
- RDBMS란?
- - 관계형 데이터베이스 관리 시스템, 확장이 용이한 장점이 있음
- - 모든 데이터를 2차원 테이블로 표현
- - 상호 관련성을 가진 테이블의 집합
- NOSQL란?
- - RDB보다 덜 제한적인 일관성 모델을 이용하는 데이터의 저장 및 검색을 위한 매커니즘을 제공
- - 빅데이터 시대에 따라 많은 양의 데이터를 효율적으로 처리하기 위해 등장(분산처리, 빠른쓰기 및 데이터의 안정성) 
- NOSQL을 사용하는 이유는 무엇인가요?

- RDBMS와 NOSQL 비교
- - 스키마가 없음
- - 관계 정의가 없으므로 Join이 불가능
- - 트랜잭션을 지원하지 않음
- - 분산처리의 기능을 쉽게 제공(자체 프레임워크에 포함)
- - NOSQL의 종류는 무엇이 있나요?
- - MongoDB란?

- DDL/DML/DCL/TCL이란?
  
- DB의 데이타 유형은 무엇이 있나요?
- LOB란?
- LOB의 종류는?

- 인덱스란?
  
- 인덱스를 사용하는 이유 및 장단점
- - 데이터를 논리적으로 정렬하여 검색과 정렬 작업의 속도를 높이기 위해 사용
- - 데이터 삽입, 변경 등이 일어날 때 매번 인덱스가 변경되기 때문에 성능이 떨어질 수 있음
- 클러스터드 인덱스 vs 논 클러스터드 인덱스

- 데이터베이스 인덱스의 자료구조

- 정규화란?
- - 논리적 데이터베이스 설계에 테이블을 구조화하는 기법
- 정규화를 하는 이유는 무엇인가?
- - 데이터의 일관성 및 데이터 중복을 최소화하고 최대의 데이터 안정성 확보를 위한 안정적 자료구조로 변환하기 위해서 하나의 테이블을 둘 이상으로 분리하는 작업
- 정규화 1, 2, 3에 대하여 각각 설명하세요.
- 1. 제1 정규형: 테이블의 각 셀의 값은 단일값을 가짐
- 2. 제2 정규형: 주키가 합성키며 부분종속이 존재 할 경우
- 3. 제3 정규형: 비주키 속성 간에 발생하는 함수적 종속이 발생하는 경우
- 역정규화를 하는 이유는 무엇인가요
- - 데이터 호출 시 여러 테이블을 불러서 JOIN을 해줘야한다면 이 비용도 만만치 않기 때문에 역정규화를 함
- 함수적 종속에 대해서 설명하시오
- - 테이블 속성들간의 관계에 대한 제약조건으로 속성A가 속성B를 결정할 때 B는 A에 함수적으로 종속이라고 함
- 완전함수적 종속에 대하여 설명하시오
- - 완전함수적 종속 : 속성들의 집합 X에 대해 Y가 함수적으로 종속될 때, X의 부분집합에 대하여서는 함수적으로 종속되지 않는 경우 Y는 X에 대하여 완전 함수적 종속이라고 함
- 교착상태란?
  
- 데드락에 대해서 설명하시오
```
T1: write(A) read(B)
T2: read(B) read(A)
```
- - 위와 같은 트랜잭션이 있다고 하면 T1은 A를 로킹해두고 B의 로킹해제를 기다려야하고 T2는 B를 로킹해두고 A를 기다려야 함 이 때 두 트랜잭션이 무한정 대기해야하는 상황이 발생하는데 이것이 데드락
- - 해결방법 : 이 경우 T1, T2중 하나를 ROLLBACK하고 나머지 하나를 완료시킨 후 ROLLBACK한 트랜잭션을 다시 실행시킴
- 데드락을 안 생기게 하는 방법을 설명하시오
- - 일반적으로는 데드락 탐지나 회피를 적용시키면 됨
- - 탐지인 경우 알고리즘을 통해 매번 데드락인지 아닌지 검사를 해야하므로 코스트가 큼
- - 회피인 경우 시분할 처리를하여 T1이 끝나면 T2가 실행시키게도 하면 됨
- DB 무결성이란?
- 무결성 유지하는 이유가 있을까요?

- 트랜잭션이란?
- - 데이터 작업시에 문제가 생기면, 데이터 작업을 하기 이전 시점으로 모든 데이터를 원상 복구 하는 것
- 트랜잭션의 성질을 말씀해보시오
- - ACID
- ACID란?
- - 1. Atomicity(원자성): 트랜잭션의 연산이 DB에 모두 반영되던지 전혀 반영이 되지 않던지 둘중에 하나만 수행해야 함
- - 2. Consistency(일관성): 트랜잭션이 성공적으로 완료된 후에는 언제나 일관성 있는 DB상태로 변환되어야 함
- - 3. Isolation(독립성): 트랜잭션이 완전히 완료되기 전에는 다른 트랜잭션에서 수행 결과를 참조할 수 없음
- - 4. Durability(영속성): 성공적으로 완료된 트랜잭션의 결과는 시스템이 고장나더라도 영구적으로 반영되어야 함
- 트랜잭션을 병행으로 처리하려고 할 때 발생할 수 있는 문제를 설명하시오
- - 갱신 내용 손실 : 동시에 하나의 데이터가 갱신될 때 하나의 갱신이 누락되는 경우
- - 현황 파악 오류 : 하나의 데이터 갱신이 끝나지 않은 시점에서 다른 트랜잭션이 해당 데이터를 조회하는 경우
- - 모순성 : 두 트랜잭션이 동시에 실행될 때 데이터베이스가 일관성이 없는 모순된 상태로 남는 문제
- - 연쇄 복귀 : 두 트랜잭션이 하나의 레코드를 갱신할 때 하나의 트랜잭션이 롤백하면 다른 하나의 트랜잭션 마저 롤백이 되는 문제
- 트랜잭션을 병행으로 처리할 때 문제를 방지하기 위한 방법을 설명하시오
- - 로킹 제어 기법을 사용
- - 트랜잭션이 특정 DB의 데이터를 사용할 때 DB의 일정부분을 Lock시키고 트랜잭션이 완료될때 해당부분을 Unlock시키는 방법
- 로킹 제어가 일으킬 수 있는 문제점은 무엇인가요?
- - 로킹 단위가 크면 그만큼 관리가 쉽지만 병행성이 떨어짐
- - 로킹단위가 작으면 관리가 어렵고 오버헤드가 증가하지만, 병행성이 올라감
- 트랜잭션 격리레벨에 대해 말해주세요

- DB의 Commit / Rollback이란?
- - Commit: Update, Delete, Insert를 수행했을 때, 그 쿼리문 수행결과에 대해 확정을 짓겠다는 뜻
- - Rollback: 쿼리문 수행결과에 대해 번복을 함. 즉, 쿼리문 수행 이전으로 원상복귀 하겠다는 뜻
- 참조 무결성이란?
- - 관계 데이터베이스 관계 모델에서 관련된 테이블 간의 일관성을 말함(사용자의 실수로 관련 데이터가 삭제되거나 수정되는 것을 방지)
- - 참조 무결성 제약 조건: 기본 테이블에서 일치하는 필드가 기본키이거나 고유 인덱스를 갖고 있거나 관련 필드의 데이터 형식이 같아야 함
- 기본키(Primary Key)와 유일키(Unique Key)의 차이점?
- SQL이란?
- - Structured Query Language의 약자로 구조화 질의어
- - 데이터 정의어(DDL)와 데이터 조작어(DML)를 포함한 데이터베이스 용 질의 언어의 일종
- PK, FK란?
- - Primary Key: 테이블에서 각 Row(행)을 유일하게 구분하는 Column-Key
- - Foreign KEy: 다른 테이블의 Primary-Key Column의 값을 반드시 참조해야 하는 Key

- JOIN이란?
- JOIN의 원리는?
- JOIN을 사용하는 이유는 무엇인가요?
- - 2개 이상의 테이블에서 조건에 맞는 데이터를 추출하기 위하여 사용
- JOIN의 종류는 무엇이 있나요?
- - Inner Join : 2개 이상의 테이블에서 교집합만을 추출
- - Left Join : 2개 이상의 테이블에서 from에 해당하는 부분을 추출
- - Right Join : 2개 이상의 테이블에서 from과 join하는 테이블에 해당하는 부분을 추출
- - Outer Join : 아웃터 조인 또는 풀 조인이라고 불림, 2개 이상의 테이블에서 모든 테이블에 해당하는 부분을 추출

- VIEW란?
- 인라인뷰, 서브쿼리,스칼라서브쿼리가 무엇인가?
- 테이블을 드롭(DROP)하는 것과 자르는 것(Truncate), 그리고 테이블 내 모든 레코드를 삭제(Delete)하는 것의 차이점은 무엇입니까?

- 힌트란?
- - 오라클 옵티마이저(Optimizer)에게 SQL문 실행을 위한 데이터를 스캐닝하는 경로, 조인하는 방법 등을 알려주기 위해 SQL사용자가 SQL 구문에 작성하는 것
- 트리거란?
- - 특정 테이블에 INSERT, DELETE, UPDATE 같은 DML 문이 수행되었을 때, 데이터베이스에서 자동으로 동작하도록 작성된 프로그램
- - 사용자가 직접 호출하는 것이 아니라, 데이터베이스에서 자동적으로 호출하는 것이 가장 큰 특징
- 프로시저란? 
- - 특정 작업을 수행 하는, 이름이 있는 PL/SQL BLOCK
- - 매개 변수를 받을 수 있고, 반복적으로 사용 할 수 있는 BLOCK
- - 보통 연속 실행 또는 구현이 복잡한 트랜잭션을 수행하는 PL/SQL BLOCK을 데이터베이스에 저장하기 위해 생성
- 데이타베이스 튜닝이란?
  
- 데이타베이스 튜닝 방법은?
- - 1.DB 설계 튜닝 -> 2.DBMS 튜닝 -> 3.SQL 튜닝의 단계가 있음
- - - 1단계(모델링 관점): 반정규화, 분산파일배치
- - - 1. 데이터베이스 설계 단계에서 성능 고려하여 설계
- - - 2. 데이터 모델링, 인덱스 설계
- - - 3. 데이터파일, 테이블 스페이스 설계
- - - 4. 데이터베이스 용량 산정
- - - 2단계(환경 관점): Buffer크기, Cache크기
- - - 1. 성능을 고려하여 메모리나 블록 크기 지정
- - - 2. CPU, 메모리 I/O에 관한 관점
- - - 3단계(APP 관점): Hash / Join
- - - 1. SQL 작성 시 성능 고려
- - - 2. Join, Indexing, SQL Execution Plan
- 데이터베이스 장애에 대해 설명하시오
- - 트랜잭션 장애: 트랜잭션을 정상적으로 완료하지 못함
- - 시스템 장애: 하드웨어, 소프트웨어 고장으로 인한 장애
- - 디스크 장애: 디스크 스토리지 일부 혹은 전체 붕괴로 인한 장애
- 데이터베이스 회복 기법에 대해 설명하시오
- - 로그기반 회복기법
- - 지연 갱신 회복 기법
- - 1. write 연산 지연, 로그에 DB변경 내역 저장
- - 2. 트랜잭션 완료시 로그를 보고 write 연산 수행
- - 3. 트랜잭션 완료시 장애 발생 : REDO만 실행
- - 4. 트랜잭션 미완료시 장애 발생 : 로그 무시
- - 즉시 갱신 회복 기법
- - 1. 즉시 DB 변경, 로그에 기록
- - 2. 장애 발생 시 로그에 기반하여 UNDO 실행
- - 체크포인트 회복기법
- - 1. 체크 포인트를 지정하여 장애발생시 체크포인트까지 UNDO 실행 후 다시 REDO 실행
- - 그림자 페이징 회복 기법
- - 1. 하드디스크에 그림자 페이지를 만들고 저장해두고 장애발생시 하드디스크에 있는 페이지로 주메모리 페이지 변경
- - 2. 장애 미발생시 그림자 페이지 테이블은 삭제
- 클러스터링 vs 리플리케이션에 대해 설명해주세요.

- ER 모델이란?
- - ER(Entity-Relation) 모델: 개체-관계 모델, 데이터베이스를 설계할 때 사용하는 모델
- 실행계획이란?
- 데이타베이스 버퍼 캐시란?
- Redis란?
- Memcached란?
- Redis와 Memcached의 차이는?
- Elastic Search란?
- CAP 이론과, Eventual Consistency에 대해서 설명해주세요

- 오라클중에 계층형 쿼리란?
- 오라클에서 행을 열로 변환 하는 쿼리가 있나요(PIVOT)?
- 오라클에서 그룹별 소계 합계 구하는 함수에 대해 설명해주세요.
- ROLLUP 함수란?
- CUBE 함수란?
- 그룹별 순번, 순위기 매기기 함수란?

- 번외 질문 : DB 구조 설계해본 경험과 유의사항에 대해 말해주세요
- 검색조건중에 like절과 in 중에 어떤게 더 빠를까요? 그 이유는? (메가존 면접문제)
- 쿼리 순서에 대해 나열해주세요.



